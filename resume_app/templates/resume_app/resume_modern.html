{% extends 'resume_app/base.html' %}
{% block content %}
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

<style>
    :root {
        --bg-light: #f4f6fc;
        --bg-dark: #121212;
        --primary: #007bff;
        --text-light: #333;
        --text-dark: #eee;
        --sidebar-bg: #0d1b2a;
        --font-main: 'Inter', sans-serif;
    }

    body {
        background: var(--bg-light);
        font-family: var(--font-main);
        margin: 0;
        padding: 20px;
        transition: 0.3s ease all;
        color: var(--text-light);
    }

    body[data-theme="dark"] {
        background: var(--bg-dark);
        color: var(--text-dark);
    }

    .resume-wrapper {
        max-width: 900px;
        margin: auto;
        display: flex;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 0 25px rgba(12, 0, 249, 0.1);
    }

    .left {
        background: var(--sidebar-bg);
        color: white;
        width: 30%;
        padding: 30px 20px;
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
    }

    .left h2 {
        font-size: 22px;
        margin-bottom: 5px;
        text-align: center;
        color: #007bff;
    }

    .left p {
        font-size: 13px;
        text-align: center;
        margin-bottom: 5px;
    }

    .skills, .languages, .contact {
        margin-top: 25px;
    }

    .skill-tag {
        display: inline-block;
        background: rgba(255, 255, 255, 0.15);
        color: white;
        padding: 5px 12px;
        margin: 4px;
        border-radius: 20px;
        font-size: 13px;
    }

    .right {
        background: white;
        padding: 30px;
        width: 70%;
    }

    body[data-theme="dark"] .right {
        background: #2c2c2c;
    }

    h1 {
        font-size: 26px;
        margin-bottom: 0;
    }

    h3 {
        font-size: 18px;
        color: var(--primary);
        margin-bottom: 10px;
    }

    .section {
        margin-bottom: 25px;
    }

    ul {
        padding-left: 20px;
        margin: 0;
    }

    li {
        margin-bottom: 8px;
        font-size: 15px;
    }

    .score-box {
        text-align: center;
        margin: 20px auto;
    }

    .btn-area {
        text-align: center;
        margin: 30px 0;
    }

    .btn {
        background: linear-gradient(135deg, #0400ff, #000000);
        color: #fff;
        padding: 12px 24px;
        border: none;
        border-radius: 8px;
        font-weight: 600;
        font-size: 15px;
        cursor: pointer;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        box-shadow: 0 5px 15px rgba(0, 123, 255, 0.3);
    }

    .btn:hover {
        transform: scale(1.05);
        box-shadow: 0 8px 25px rgba(0, 195, 255, 0.5);
    }

    .btn:active {
        transform: scale(0.96);
    }

    @media screen and (max-width: 768px) {
        .resume-wrapper {
            flex-direction: column;
        }

        .left, .right {
            width: 100%;
        }

        .right {
            padding: 20px;
        }
    }

    @media print {
        .btn-area {
            display: none;
        }
        body, html {
            background: white !important;
            color: black !important;
        }
    }
</style>

<!-- Score Block -->
<div class="score-box">
    <h3>Resume Score: {{ resume_score }}/30</h3>
    {% if resume_score >= 25 %}
        <p style="color: green;">‚úÖ Excellent!</p>
    {% elif resume_score >= 15 %}
        <p style="color: orange;">‚ö†Ô∏è Needs improvement</p>
    {% else %}
        <p style="color: red;">‚ùå Needs work</p>
    {% endif %}
</div>

<!-- Resume Layout -->
<div class="resume-wrapper" id="resume">
    <div class="left">
        <h2>{{ name }}</h2>
        {% if about %}<p>{{ about }}</p>{% endif %}

        <div class="contact">
            {% if email %}<p><strong>Email:</strong> {{ email }}</p>{% endif %}
            {% if phone %}<p><strong>Phone:</strong> {{ phone }}</p>{% endif %}
            {% if age %}<p><strong>Age:</strong> {{ age }}</p>{% endif %}
        </div>

        {% if skill1 or skill2 or skill3 or skill4 or skill5 %}
        <div class="skills">
            <h3>Skills</h3>
            {% if skill1 %}<span class="skill-tag">{{ skill1 }}</span>{% endif %}
            {% if skill2 %}<span class="skill-tag">{{ skill2 }}</span>{% endif %}
            {% if skill3 %}<span class="skill-tag">{{ skill3 }}</span>{% endif %}
            {% if skill4 %}<span class="skill-tag">{{ skill4 }}</span>{% endif %}
            {% if skill5 %}<span class="skill-tag">{{ skill5 }}</span>{% endif %}
        </div>
        {% endif %}

        {% if lang1 or lang2 or lang3 %}
        <div class="languages">
            <h3>Languages</h3>
            <ul>
                {% if lang1 %}<li>{{ lang1 }}</li>{% endif %}
                {% if lang2 %}<li>{{ lang2 }}</li>{% endif %}
                {% if lang3 %}<li>{{ lang3 }}</li>{% endif %}
            </ul>
        </div>
        {% endif %}
    </div>

    <div class="right">
        {% if degree1 or degree2 or degree3 %}
        <div class="section">
            <h3>Education</h3>
            <ul>
                {% if degree1 %}<li>{{ degree1 }} - {{ college1 }} ({{ year1 }})</li>{% endif %}
                {% if degree2 %}<li>{{ degree2 }} - {{ college2 }} ({{ year2 }})</li>{% endif %}
                {% if degree3 %}<li>{{ degree3 }} - {{ college3 }} ({{ year3 }})</li>{% endif %}
            </ul>
        </div>
        {% endif %}

        {% if project1 or project2 %}
        <div class="section">
            <h3>Projects</h3>
            <ul>
                {% if project1 %}<li><strong>{{ project1 }}</strong> ‚Äì {{ durat1 }}<br>{{ desc1 }}</li>{% endif %}
                {% if project2 %}<li><strong>{{ project2 }}</strong> ‚Äì {{ durat2 }}<br>{{ desc2 }}</li>{% endif %}
            </ul>
        </div>
        {% endif %}

        {% if company1 or company2 %}
        <div class="section">
            <h3>Experience</h3>
            <ul>
                {% if company1 %}<li><strong>{{ company1 }}</strong> ‚Äì {{ post1 }} ({{ duration1 }})<br>{{ lin11 }}</li>{% endif %}
                {% if company2 %}<li><strong>{{ company2 }}</strong> ‚Äì {{ post2 }} ({{ duration2 }})<br>{{ lin21 }}</li>{% endif %}
            </ul>
        </div>
        {% endif %}

        {% if ach1 or ach2 or ach3 %}
        <div class="section">
            <h3>Achievements</h3>
            <ul>
                {% if ach1 %}<li>{{ ach1 }}</li>{% endif %}
                {% if ach2 %}<li>{{ ach2 }}</li>{% endif %}
                {% if ach3 %}<li>{{ ach3 }}</li>{% endif %}
            </ul>
        </div>
        {% endif %}
    </div>
</div>

<!-- Buttons -->
<div class="btn-area">
    <button class="btn" onclick="generatePDF('resume')">üìÑ Download PDF</button>
    <button class="btn" onclick="toggleTheme()">üåì Toggle Theme</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>
<script>
    function generatePDF(containerId) {
        const element = document.getElementById(containerId);
        const opt = {
            margin: 0,
            filename: '{{ name|default:"resume" }}_modern.pdf',
            image: { type: 'jpeg', quality: 1.0 },
            html2canvas: { scale: 5, useCORS: true },
            jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
        };
        html2pdf().set(opt).from(element).save();
    }

    function toggleTheme() {
        const body = document.body;
        const current = body.getAttribute("data-theme");
        body.setAttribute("data-theme", current === "dark" ? "light" : "dark");
    }
</script>
{% endblock %}
