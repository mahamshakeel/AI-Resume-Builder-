{% extends 'resume_app/base.html' %}
{% block content %}
<link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500;600&display=swap" rel="stylesheet">

<style>
    body {
        font-family: 'Quicksand', sans-serif;
        margin: 0;
        padding: 20px;
        background: linear-gradient(135deg, #fdfbfb, #ebedee);
        transition: background 0.5s ease;
    }

    body[data-theme="dark"] {
        background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
        color: #eee;
    }

    .creative-wrapper {
        max-width: 1000px;
        margin: 30px auto;
        display: flex;
        border-radius: 14px;
        overflow: hidden;
        box-shadow: 0 0 25px rgba(0, 0, 0, 0.1);
    }

    .left-bar {
        background: linear-gradient(135deg, #ff6b6b, #f06595);
        color: #fff;
        width: 35%;
        padding: 40px 30px;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }

    .left-bar h1 {
        font-size: 28px;
        margin-bottom: 5px;
    }

    .left-bar p {
        font-size: 14px;
        line-height: 1.5;
    }

    .contact-info, .skills, .languages {
        margin-top: 25px;
    }

    .skills span, .languages span {
        display: inline-block;
        background: rgba(255,255,255,0.2);
        padding: 6px 12px;
        margin: 4px 4px 4px 0;
        border-radius: 18px;
        font-size: 13px;
    }

    .right-content {
        background: #fff;
        padding: 40px 35px;
        width: 65%;
    }

    body[data-theme="dark"] .right-content {
        background: #1c1c1c;
    }

    .right-content h2 {
        color: #f06595;
        margin-top: 30px;
        font-size: 20px;
    }

    ul {
        padding-left: 18px;
    }

    li {
        margin-bottom: 8px;
        font-size: 15px;
    }

    .section {
        margin-bottom: 30px;
    }

    .score-box {
        text-align: center;
        margin-top: 20px;
    }

    .score-box p {
        font-weight: bold;
    }

    .btn-area {
        text-align: center;
        margin: 30px 0;
    }

    .btn {
        background: linear-gradient(135deg, #ff6b6b, #f06595);
        color: #fff;
        padding: 12px 26px;
        border: none;
        border-radius: 8px;
        font-weight: 600;
        font-size: 15px;
        cursor: pointer;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        box-shadow: 0 5px 15px rgba(240, 101, 149, 0.4);
        margin: 0 8px;
    }

    .btn:hover {
        transform: scale(1.05);
        box-shadow: 0 8px 25px rgba(255, 105, 135, 0.5);
    }

    .btn:active {
        transform: scale(0.96);
    }

    @media print {
        .btn-area {
            display: none;
        }

        body, html {
            background: white !important;
            color: black !important;
        }

        .right-content {
            background: white !important;
        }

        .left-bar {
            background: #000 !important;
            color: white !important;
        }
    }
</style>

<!-- Resume Score -->
<div class="score-box">
    <h3>Resume Score: {{ resume_score }}/30</h3>
    {% if resume_score >= 25 %}
        <p style="color: green;">‚úÖ Excellent! Highly optimized.</p>
    {% elif resume_score >= 15 %}
        <p style="color: orange;">‚ö†Ô∏è Good. Could be better.</p>
    {% else %}
        <p style="color: red;">‚ùå Needs improvement.</p>
    {% endif %}
</div>

<!-- Resume Content -->
<div class="creative-wrapper" id="resume">
    <div class="left-bar">
        <div>
            <h1>{{ name }}</h1>
            {% if about %}<p>{{ about }}</p>{% endif %}
        </div>

        <div class="contact-info">
            {% if email %}<p><strong>Email:</strong> {{ email }}</p>{% endif %}
            {% if phone %}<p><strong>Phone:</strong> {{ phone }}</p>{% endif %}
            {% if age %}<p><strong>Age:</strong> {{ age }}</p>{% endif %}
        </div>

        {% if skill1 or skill2 or skill3 or skill4 or skill5 %}
        <div class="skills">
            <h4>Skills</h4>
            {% if skill1 %}<span>{{ skill1 }}</span>{% endif %}
            {% if skill2 %}<span>{{ skill2 }}</span>{% endif %}
            {% if skill3 %}<span>{{ skill3 }}</span>{% endif %}
            {% if skill4 %}<span>{{ skill4 }}</span>{% endif %}
            {% if skill5 %}<span>{{ skill5 }}</span>{% endif %}
        </div>
        {% endif %}

        {% if lang1 or lang2 or lang3 %}
        <div class="languages">
            <h4>Languages</h4>
            {% if lang1 %}<span>{{ lang1 }}</span>{% endif %}
            {% if lang2 %}<span>{{ lang2 }}</span>{% endif %}
            {% if lang3 %}<span>{{ lang3 }}</span>{% endif %}
        </div>
        {% endif %}
    </div>

    <div class="right-content">
        {% if degree1 or degree2 or degree3 %}
        <div class="section">
            <h2>üéì Education</h2>
            <ul>
                {% if degree1 %}<li>{{ degree1 }} - {{ college1 }} ({{ year1 }})</li>{% endif %}
                {% if degree2 %}<li>{{ degree2 }} - {{ college2 }} ({{ year2 }})</li>{% endif %}
                {% if degree3 %}<li>{{ degree3 }} - {{ college3 }} ({{ year3 }})</li>{% endif %}
            </ul>
        </div>
        {% endif %}

        {% if project1 or project2 %}
        <div class="section">
            <h2>üöÄ Projects</h2>
            <ul>
                {% if project1 %}<li><strong>{{ project1 }}</strong> ‚Äì {{ durat1 }}<br>{{ desc1 }}</li>{% endif %}
                {% if project2 %}<li><strong>{{ project2 }}</strong> ‚Äì {{ durat2 }}<br>{{ desc2 }}</li>{% endif %}
            </ul>
        </div>
        {% endif %}

        {% if company1 or company2 %}
        <div class="section">
            <h2>üíº Experience</h2>
            <ul>
                {% if company1 %}<li><strong>{{ company1 }}</strong> ‚Äì {{ post1 }} ({{ duration1 }})<br>{{ lin11 }}</li>{% endif %}
                {% if company2 %}<li><strong>{{ company2 }}</strong> ‚Äì {{ post2 }} ({{ duration2 }})<br>{{ lin21 }}</li>{% endif %}
            </ul>
        </div>
        {% endif %}

        {% if ach1 or ach2 or ach3 %}
        <div class="section">
            <h2>üèÜ Achievements</h2>
            <ul>
                {% if ach1 %}<li>{{ ach1 }}</li>{% endif %}
                {% if ach2 %}<li>{{ ach2 }}</li>{% endif %}
                {% if ach3 %}<li>{{ ach3 }}</li>{% endif %}
            </ul>
        </div>
        {% endif %}
    </div>
</div>

<!-- Buttons -->
<div class="btn-area">
    <button class="btn" onclick="generatePDF('resume')">üìÑ Download PDF</button>
    <button class="btn" onclick="toggleTheme()">üåì Toggle Theme</button>
</div>

<!-- Scripts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>
<script>
    function generatePDF(containerId) {
        const element = document.getElementById(containerId);
        const opt = {
            margin: 0,
            filename: '{{ name|default:"creative_resume" }}.pdf',
            image: { type: 'jpeg', quality: 1 },
            html2canvas: { scale: 5, useCORS: true },
            jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
        };
        html2pdf().set(opt).from(element).save();
    }

    function toggleTheme() {
        const body = document.body;
        const theme = body.getAttribute("data-theme");
        body.setAttribute("data-theme", theme === "dark" ? "light" : "dark");
    }
</script>
{% endblock %}
